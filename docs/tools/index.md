# Gemini CLI ツール

Gemini CLI には、Gemini モデルがローカル環境と対話し、情報にアクセスし、アクションを実行するために使用する組み込みツールが含まれています。これらのツールは CLI の機能を強化し、テキスト生成を超えてさまざまなタスクを支援できるようにします。

## Gemini CLI ツールの概要

Gemini CLI のコンテキストでは、ツールとは、Gemini モデルが実行を要求できる特定の関数またはモジュールです。たとえば、Gemini に「`my_document.txt` の内容を要約して」と依頼すると、モデルはそのファイルを読み取る必要があると判断し、`read_file` ツールの実行を要求する可能性があります。

コアコンポーネント (`packages/core`) はこれらのツールを管理し、その定義 (スキーマ) を Gemini モデルに提示し、要求されたときに実行し、結果をモデルに返してユーザー向けの応答にさらに処理します。

これらのツールは、次の機能を提供します。

- **ローカル情報へのアクセス:** ツールを使用すると、Gemini はローカルファイルシステムにアクセスし、ファイルの内容を読み取り、ディレクトリを一覧表示できます。
- **コマンドの実行:** `run_shell_command` などのツールを使用すると、Gemini は (適切な安全対策とユーザーの確認を得て) シェルコマンドを実行できます。
- **Web との対話:** ツールは URL からコンテンツを取得できます。
- **アクションの実行:** ツールは、ファイルを変更したり、新しいファイルを書き込んだり、システムで他のアクションを実行したりできます (これも通常は安全策を講じています)。
- **応答の根拠:** リアルタイムまたは特定のローカルデータを取得するためにツールを使用することで、Gemini の応答はより正確で、関連性があり、実際のコンテキストに基づいたものになります。

## Gemini CLI ツールの使用方法

Gemini CLI ツールを使用するには、Gemini CLI にプロンプトを入力します。プロセスは次のとおりです。

1.  Gemini CLI にプロンプトを入力します。
2.  CLI はプロンプトをコアに送信します。
3.  コアは、プロンプトと会話履歴とともに、利用可能なツールとその説明/スキーマのリストを Gemini API に送信します。
4.  Gemini モデルがリクエストを分析します。ツールが必要であると判断した場合、その応答には、特定のパラメータで特定のツールを実行する要求が含まれます。
5.  コアはこのツール要求を受け取り、検証し、(機密性の高い操作についてはユーザーの確認後) ツールを実行します。
6.  ツールからの出力は Gemini モデルに返送されます。
7.  Gemini モデルはツールの出力を使用して最終的な回答を作成し、それがコアを介して CLI に返送され、表示されます。

通常、ツールがいつ呼び出されているか、成功したか失敗したかを示すメッセージが CLI に表示されます。

## セキュリティと確認

多くのツール、特にファイルシステムを変更したりコマンドを実行したりできるツール (`write_file`、`edit`、`run_shell_command`) は、安全性を考慮して設計されています。Gemini CLI は通常、次のことを行います。

- **確認の要求:** 機密性の高い操作を実行する前にプロンプトを表示し、実行されようとしているアクションを示します。
- **サンドボックスの利用:** すべてのツールは、サンドボックスによって適用される制限の対象となります ([README](../../README.md#sandboxing) を参照)。つまり、サンドボックスで操作する場合、使用したいツール (MCP サーバーを含む) はサンドボックス環境の _内部_ で利用可能である必要があります。たとえば、`npx` を介して MCP サーバーを実行するには、`npx` 実行可能ファイルがサンドボックスの Docker イメージ内にインストールされているか、`sandbox-exec` 環境で利用可能である必要があります。

ツールを続行させる前に、必ず確認プロンプトを注意深く確認することが重要です。

## Gemini CLI のツールの詳細

Gemini CLI の組み込みツールは、次のように大別できます。

- **[ファイルシステムツール](./file-system.md):** ファイルやディレクトリとの対話 (読み取り、書き込み、一覧表示、検索など) のため。
- **[シェルツール](./shell.md) (`run_shell_command`):** シェルコマンドの実行のため。
- **[Web フェッチツール](./web-fetch.md) (`web_fetch`):** URL からのコンテンツの取得のため。
- **[Web 検索ツール](./web-search.md) (`web_search`):** Web の検索のため。
- **[複数ファイル読み取りツール](./multi-file.md) (`read_many_files`):** 複数のファイルまたはディレクトリからコンテンツを読み取るための特殊なツールで、`@` コマンドでよく使用されます。
- **[メモリツール](./memory.md) (`save_memory`):** セッション間で情報を保存および呼び出すため。

さらに、これらのツールには次のものが組み込まれています。

- **[MCP サーバー](./mcp-server.md)**: MCP サーバーは、Gemini モデルとローカル環境または API などの他のサービスとの間のブリッジとして機能します。
- **[サンドボックス](../sandbox.md)**: サンドボックスは、モデルとその変更を環境から分離して、潜在的なリスクを軽減します。